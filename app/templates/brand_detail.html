<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="pageTitle">Product Detail</title>

    <!-- Main site stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <!-- Announcements stylesheet (same as index.html) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/announcements.css') }}">
    <!-- Footer stylesheet (same as index.html) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <!-- Page-specific stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/brand_detail.css') }}">

    <!-- Font Awesome for footer icons (same source as index.html) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Inline fixes for the "You may also like" slider overflow issue -->
    <style>
        /*
         * Slider overflow fix and alignment:
         * - Ensure the slider section is contained and centered like other sections
         * - The .slider-window clips overflowing track content to prevent it from covering the whole page
         * - The track is horizontal flex with non-wrapping children sized appropriately
         */
        .slider-section {
            max-width: 1200px;
            margin: 24px auto;
            padding: 0 12px;
            box-sizing: border-box;
        }

        .slider-section h3 {
            margin: 0 0 12px 0;
            font-size: 1.15rem;
            color: #3e2723;
        }

        /* The viewport for the slider — must hide overflow */
        .slider-window {
            width: 100%;
            overflow: hidden;
            box-sizing: border-box;
            border-radius: 6px;
        }

        /* The track holding items: horizontal row that doesn't wrap */
        .slider-track {
            display: flex;
            gap: 14px;
            align-items: stretch;
            flex-wrap: nowrap;
            transition: transform 0.25s ease;
            will-change: transform;
            padding: 8px 4px;
            box-sizing: border-box;
        }

        /* Ensure each suggested product card doesn't grow to full width */
        .slider-track>* {
            flex: 0 0 auto;
            /* prefer a comfortable card width; backend/JS may render cards with their own classes */
            width: 220px;
            max-width: 260px;
            box-sizing: border-box;
        }

        /* If brand_detail.css already defines .product-card, keep card visuals but make sure they fit */
        .slider-track .product-card {
            height: auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        /* Small screens: allow cards to be slightly narrower */
        @media (max-width: 600px) {
            .slider-track>* {
                width: 160px;
                max-width: 38%;
            }

            .slider-section {
                padding: 0 8px;
            }
        }
    </style>
</head>

<body data-placeholder="{{ url_for('static', filename='images/placeholder.jpg') }}">
    <!-- Announcement Section (copied from index.html) -->
    <div class="announcement-container container" aria-live="polite">
        <header class="announcement-bar" role="region" aria-label="Site announcements">
            <div class="announcement-text-container" aria-hidden="false">
                <ul class="announcement-list" aria-live="off" aria-hidden="false">
                    <li>Shop Now Pay Later</li>
                    <li>Free Delivery Above $50</li>
                    <li>10% Discount if Cash on Delivery</li>
                    <li>Trusted Products</li>
                    <li>Shop With Us Now</li>
                </ul>
            </div>
            <div class="city-selector" aria-hidden="false">
                <a href="{{ url_for('brand') }}" class="shop-locator">Store Locator</a>
                <label for="city-dropdown" class="city-label">Shop from</label>
                <select id="city-dropdown" aria-label="Select your shopping country">
                    <option value="Saudi Arabia">Saudi Arabia</option>
                    <option value="UAE">UAE</option>
                    <option value="Kuwait">Kuwait</option>
                    <option value="Qatar">Qatar</option>
                    <option value="Bahrain">Bahrain</option>
                    <option value="Turkey">Turkey</option>
                </select>
            </div>
        </header>
    </div>
    <!-- End Announcement Section -->

    <!-- Navbar -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="navbar-left">
            <a href="{{ url_for('index') }}" class="brand-logo">WPerfumes</a>
            <ul class="nav-tabs" role="menubar" aria-label="Main menu">
                <li><a href="{{ url_for('index') }}" role="menuitem">Home</a></li>
                <li><a href="{{ url_for('men') }}" role="menuitem">Men</a></li>
                <li><a href="{{ url_for('women') }}" role="menuitem">Women</a></li>
                <li><a href="{{ url_for('beauty') }}" role="menuitem">Beauty</a></li>
            </ul>
        </div>
        <div class="navbar-center">
            <div class="search-container" role="search">
                <input id="globalSearch" type="text" placeholder="Search for scents, notes, or brands..."
                    aria-label="Search">
            </div>
        </div>
        <div class="navbar-right">
            <!-- ensure badge id matches main.js -->
            <a href="{{ url_for('cart') }}" class="cart-btn" id="cartBtn" aria-label="Open cart">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3e2723" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-8.19H6"></path>
                </svg>
                <span>Cart</span>
                <span id="cartCountBadge" class="cart-count-badge" style="display:none;">0</span>
            </a>
            <div class="login-menu-container">
                <a href="{{ url_for('login_page') }}" class="login-btn" aria-label="Login">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <circle cx="12" cy="7" r="4"></circle>
                        <path d="M5.5 21a5.5 5.5 0 0 1 13 0"></path>
                    </svg>
                    <span>Login</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main role="main">

        <!-- Product panel (card) for easier visibility -->
        <section class="product-panel" aria-label="Product panel">
            <div class="main-product-row" role="region" aria-label="Product details">
                <!-- LEFT: Main product image and thumbnails below -->
                <section class="image-section" aria-label="Product images">
                    <div class="product-image-wrapper" aria-live="polite">
                        <img id="productImage" src="{{ url_for('static', filename='images/placeholder.jpg') }}"
                            alt="Product Image">
                    </div>
                    <div class="thumbnails-col" id="thumbnailsCol" aria-hidden="false" aria-label="Product thumbnails">
                        <!-- Thumbnails inserted by JS -->
                    </div>
                </section>

                <!-- CENTER: Name, short desc, price, CTA, key notes -->
                <section class="info-section" aria-label="Product information">
                    <div id="discountPercentInfo" class="discount-info hidden" role="status" aria-live="polite"></div>
                    <h1 id="productName">Loading...</h1>
                    <span id="brandName" class="muted">Brand</span>
                    <div id="productPrice">--</div>
                    <div id="subtitle" class="muted" style="display:none;"></div>
                    <div class="product-actions" role="group" aria-label="Product actions">
                        <!-- Primary CTA: Buy Now (keeps addCartBtn ID so existing JS that hooks it still works) -->
                        <button id="addCartBtn" class="cta-button" aria-live="polite" aria-label="Buy now">⚡ Buy
                            Now</button>
                        <!-- Secondary CTA: Wishlist -->
                        <button id="buyNowBtn" class="cta-secondary" aria-label="Add to wishlist">♡ Wishlist</button>
                    </div>
                    <div class="specs" aria-label="Product specifications">
                        <h4>Key Notes</h4>
                        <ul id="keyNotes">
                            <!-- Key notes inserted by JS -->
                        </ul>
                        <div id="productTags" class="muted small" style="margin-top:8px;"></div>
                    </div>
                </section>

                <!-- RIGHT: Detailed description with formatting -->
                <section class="details-section" aria-label="Detailed product description">
                    <h4>Details & Highlights</h4>
                    <div id="productDescriptionRich" class="rich-description">
                        <!-- Rich description inserted by JS (rendered HTML from backend) -->
                        <p id="productDescription">Loading product details...</p>
                    </div>
                </section>
            </div>
        </section>

        <!-- Similar products slider -->
        <div class="slider-section" aria-label="Similar products">
            <div id="similarProducts">
                <h3>You may also like</h3>
                <div class="slider-window" role="listbox" aria-label="Similar product suggestions">
                    <div class="slider-track" id="sliderTrack">
                        <!-- Similar product cards inserted by JS -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Cart modal (copied from index.html) -->
    <div id="cartModalBg" class="cart-modal-bg" aria-hidden="true" style="display:none;">
        <div class="cart-modal-content" id="cartModal" role="dialog" aria-modal="true" aria-label="Cart">
            <button id="cartModalCloseBtn" class="cart-modal-close" aria-label="Close cart">✕</button>
            <div class="cart-modal-header">
                <div>Shopping Cart</div>
            </div>

            <div id="cartDiscountInfo" class="discount-info" style="display:none;"></div>

            <div id="cartList" class="cart-list" aria-live="polite"></div>

            <div class="cart-modal-footer">
                <div id="cartModalTotal" class="cart-modal-total"></div>
                <div style="flex:1"></div>
                <a id="openCheckoutFromCart" class="btn-primary" href="{{ url_for('checkout') }}"
                    style="background:#2d8f7c;color:#fff;padding:8px 12px;border-radius:6px;border:none;cursor:pointer;">Checkout</a>
            </div>
        </div>
    </div>

    <!-- Checkout modal (same structure/ids as index.html so main.js can drive it) -->
    <div id="checkoutModalBg" class="cart-modal-bg" aria-hidden="true" style="display:none;">
        <div id="checkoutModalContent" role="dialog" aria-modal="true" aria-label="Checkout">
            <button id="checkoutModalCloseBtn" aria-label="Close checkout">✕</button>
            <h2>Checkout</h2>
            <div id="checkoutDiscountInfo" class="discount-info" style="display:none;"></div>
            <div id="promoWrapper" style="margin-top:12px;">
                <label for="promoInput">Promo code</label>
                <div style="display:flex;gap:8px;align-items:center;">
                    <input id="promoInput" type="text" placeholder="Enter promo code"
                        style="flex:1;padding:8px;border:1px solid #ddd;border-radius:6px;">
                    <button id="applyPromoBtn" type="button"
                        style="padding:8px 10px;border-radius:6px;border:none;background:#2d8f7c;color:white;cursor:pointer;">Apply</button>
                </div>
                <div id="promoMsg" style="margin-top:8px;color:#666;font-size:0.95em;"></div>
            </div>

            <div id="cartSection" aria-live="polite"></div>

            <div id="paymentSelectWrapper" style="display:block;margin-top:12px;">
                <label class="payment-dropdown-label">Select Payment Method</label>
                <select id="paymentSelect" class="payment-select">
                    <option>Cash on Delivery</option>
                    <option>Visa/Mastercard</option>
                </select>
            </div>

            <form id="orderForm" style="margin-top:12px;">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <input id="customer" name="customer" type="text" placeholder="Full name" required
                        style="padding:8px;border:1px solid #ddd;border-radius:6px;">
                    <input id="email" name="email" type="email" placeholder="Email" required
                        style="padding:8px;border:1px solid #ddd;border-radius:6px;">
                    <input id="phone" name="phone" type="text" placeholder="Phone"
                        style="padding:8px;border:1px solid #ddd;border-radius:6px;">
                    <input id="date" name="date" type="datetime-local"
                        style="padding:8px;border:1px solid #ddd;border-radius:6px;">
                </div>
                <div style="margin-top:10px;">
                    <textarea id="address" name="address" rows="3" placeholder="Shipping address"
                        style="width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;"></textarea>
                </div>
                <div id="orderMsg" style="margin-top:10px;"></div>
                <div class="form-buttons" style="margin-top:12px;">
                    <button id="checkoutBtn" type="submit"
                        style="background:#2d8f7c;color:#fff;padding:8px 12px;border-radius:6px;border:none;cursor:pointer;">Place
                        Order</button>
                    <button id="buyNowBtn" type="button"
                        style="background:#27ae60;color:#fff;padding:8px 12px;border-radius:6px;border:none;cursor:pointer;">Buy
                        Now</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer Section (copied from index.html) -->
    <footer class="main-footer">
        <div class="footer-card footer-card-1">
            <div>
                <h3>Connect with Us</h3>
                <div class="social-icons-row">
                    <a href="https://www.facebook.com/wperfumes" class="social-icon"
                        aria-label="Follow us on Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/wperfumes" class="social-icon"
                        aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.tiktok.com/@wperfumes" class="social-icon" aria-label="Follow us on TikTok"><i
                            class="fab fa-tiktok"></i></a>
                    <a href="https://www.twitter.com/wperfumes" class="social-icon" aria-label="Follow us on Twitter"><i
                            class="fab fa-x-twitter"></i></a>
                </div>
                <h3>Secure Payments</h3>
                <div class="payment-icons-row">
                    <span class="payment-icon" aria-label="Visa Payment"><i class="fab fa-cc-visa"></i></span>
                    <span class="payment-icon" aria-label="PayPal Payment"><i class="fab fa-cc-paypal"></i></span>
                    <span class="payment-icon" aria-label="Apple Pay"><i class="fab fa-cc-apple-pay"></i></span>
                    <span class="payment-icon" aria-label="MasterCard Payment"><i
                            class="fab fa-cc-mastercard"></i></span>
                </div>
            </div>
            <p class="registration-number" id="copyright">
                &copy; WPerfumes, Inc. All Rights Reserved.<br>
                Company Reg. No: 12345678A
            </p>
        </div>
        <div class="footer-card footer-card-2">
            <h2 class="footer-logo">WPerfumes</h2>
            <div class="footer-link-column">
                <h4>Company</h4>
                <a href="/about" class="footer-link">About Us</a>
                <a href="/vision" class="footer-link">Our Vision</a>
                <a href="/sustainability" class="footer-link">Sustainability</a>
                <a href="/careers" class="footer-link">Careers</a>
            </div>
            <div class="footer-link-column">
                <h4>Support</h4>
                <a href="/contact" class="footer-link">Contact Us</a>
                <a href="/faq" class="footer-link">FAQ</a>
                <a href="/shipping-returns" class="footer-link">Shipping & Returns</a>
                <a href="/privacy" class="footer-link">Privacy Policy</a>
            </div>
            <div class="footer-link-column">
                <h4>Explore</h4>
                <a href="/best-sellers" class="footer-link">Best Sellers</a>
                <a href="/gift-sets" class="footer-link">Gift Sets</a>
                <a href="/scent-finder" class="footer-link">Scent Finder Quiz</a>
                <a href="/blog" class="footer-link">Blog & News</a>
            </div>
            <div class="footer-link-column">
                <h4>Contact Info</h4>
                <a href="mailto:support@wperfumes.com" class="footer-link">Email: support@wperfumes.com</a>
                <a href="tel:+15551234567" class="footer-link">Phone: +1 (555) 123-4567</a>
                <a href="/contact#address" class="footer-link">Address: 100 Scent Lane, Perfume City</a>
            </div>
        </div>
    </footer>
    <!-- End Footer Section -->

    <!-- JS Scripts -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/brand_detail.js') }}"></script>

    <!-- Announcements behavior script (scrolling, pause-on-hover, city selector toast) -->
    <script src="{{ url_for('static', filename='js/announcements.js') }}"></script>

    <!-- Footer script to update copyright year and any footer behaviors -->
    <script src="{{ url_for('static', filename='js/footer.js') }}"></script>
</body>

</html>