<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="pageTitle">Product Detail</title>

    <!-- Site stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <!-- Page-specific stylesheet (moved from inline) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/brand_detail.css') }}">
</head>

<body data-placeholder="{{ url_for('static', filename='images/placeholder.jpg') }}">
    <!-- Navbar -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="navbar-left">
            <a href="{{ url_for('index') }}" class="brand-logo">WPerfumes</a>

            <ul class="nav-tabs" role="menubar" aria-label="Main menu">
                <li><a href="{{ url_for('index') }}" role="menuitem">Home</a></li>
                <li><a href="{{ url_for('men') }}" role="menuitem">Men</a></li>
                <li><a href="{{ url_for('women') }}" role="menuitem">Women</a></li>
                <li><a href="{{ url_for('beauty') }}" role="menuitem">Beauty</a></li>
            </ul>
        </div>

        <div class="navbar-center">
            <div class="search-container" role="search">
                <input id="globalSearch" type="text" placeholder="Search for scents, notes, or brands..."
                    aria-label="Search">
            </div>
        </div>

        <div class="navbar-right">
            <a href="{{ url_for('cart') }}" class="cart-btn" id="cartBtn" aria-label="Open cart">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3e2723" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-8.19H6"></path>
                </svg>
                <span>Cart</span>
                <span class="cart-count-badge" id="cartNavCount" style="display:none;">0</span>
            </a>

            <div class="login-menu-container">
                <a href="{{ url_for('login_page') }}" class="login-btn" aria-label="Login">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <circle cx="12" cy="7" r="4"></circle>
                        <path d="M5.5 21a5.5 5.5 0 0 1 13 0"></path>
                    </svg>
                    <span>Login</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main role="main">
        <div class="main-product-row" role="region" aria-label="Product details">
            <section class="image-section" aria-label="Product images">
                <div class="thumbnails-col" id="thumbnailsCol" aria-hidden="false" aria-label="Product thumbnails">
                    <!-- Thumbnails inserted by JS -->
                </div>

                <div class="product-image-wrapper" aria-live="polite">
                    <img id="productImage" src="{{ url_for('static', filename='images/placeholder.jpg') }}"
                        alt="Product Image">
                </div>
            </section>

            <section class="info-section" aria-label="Product information">
                <div id="discountPercentInfo" class="discount-info" style="display:none;" role="status"
                    aria-live="polite"></div>

                <h1 id="productName">Loading...</h1>
                <span id="brandName" class="muted">Brand</span>

                <div id="productPrice">--</div>
                <div id="subtitle" class="muted" style="display:none;"></div>

                <p id="productDescription">Loading product details...</p>

                <div class="product-actions" role="group" aria-label="Product actions">
                    <button id="addCartBtn" class="cta-button" aria-live="polite">ðŸ›’ Add to Cart</button>
                    <button id="buyNowBtn" class="cta-secondary">âš¡ Buy Now</button>
                </div>

                <div class="specs" aria-label="Product specifications">
                    <h4>Key Notes</h4>
                    <ul id="keyNotes">
                        <!-- Key notes inserted by JS -->
                    </ul>

                    <div id="productTags" class="muted small" style="margin-top:8px;"></div>
                </div>
            </section>
        </div>

        <div class="slider-section" aria-label="Similar products">
            <div id="similarProducts">
                <h3>You may also like</h3>
                <div class="slider-window" role="listbox" aria-label="Similar product suggestions">
                    <div class="slider-track" id="sliderTrack">
                        <!-- Similar product cards inserted by JS -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Cart modal -->
    <div id="cartModalOverlay" role="dialog" aria-modal="true" aria-hidden="true">
        <div id="cartModal" role="document">
            <button id="closeCartModal" aria-label="Close cart modal">âœ•</button>
            <h2>Checkout</h2>
            <div id="cartModalDiscountInfo" class="discount-info" style="display:none;"></div>
            <div id="cartModalCart"></div>

            <div class="form-group">
                <span class="payment-dropdown-label">Select Payment Method:</span>
                <select id="cartModalPaymentSelect" class="payment-select" required>
                    <option value="Cash on Delivery" selected>Cash on Delivery</option>
                    <option value="Visa/Mastercard">Visa/Mastercard</option>
                </select>
            </div>

            <form id="cartModalForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input name="customer" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input name="email" type="email" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input name="phone">
                </div>

                <div class="form-group">
                    <label>Shipping Address</label>
                    <textarea name="address" required rows="2"></textarea>
                </div>

                <div class="form-buttons">
                    <button type="submit" id="modalPlaceOrderBtn" class="cta-button">Place Order</button>
                    <button type="button" id="modalBuyNowBtn" class="cta-secondary">Buy Now</button>
                </div>

                <div id="cartModalMsg" class="muted small" style="margin-top:10px;"></div>
            </form>
        </div>
    </div>

    <!-- Order confirmation modal -->
    <div class="cart-modal-bg" id="orderConfirmationModalBg" style="display:none;">
        <div class="cart-modal-content" id="orderConfirmationModalContent" style="max-width:400px;text-align:center;">
            <button id="orderConfirmationModalCloseBtn" title="Close"
                style="position:absolute;top:10px;right:18px;font-size:1.5em;background:none;border:none;cursor:pointer;">&times;</button>
            <div id="orderConfirmationMsg" style="margin:40px 0 15px 0;"></div>
        </div>
    </div>

    <!-- Shared main.js if you keep it -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Page-specific JS (moved from inline) -->
    <script src="{{ url_for('static', filename='js/brand_detail.js') }}"></script>
</body>

</html>